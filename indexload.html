<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ga-zan Blockchain Hive</title>
  <style>
    body {
      margin: 0;
      font-family: 'Inter', 'Segoe UI', sans-serif;
      background: #f7f7f7;
      color: #333;
      line-height: 1.6;
      scroll-behavior: smooth;
    }

    header {
      background: #fff;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      border-bottom: 1px solid #e0e0e0;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 10;
    }

    header .logo {
      font-weight: bold;
      font-size: 24px;
      color: #e31337;
      letter-spacing: 1px;
    }

    header nav a {
      margin-left: 20px;
      text-decoration: none;
      color: #333;
      font-weight: 600;
      transition: color 0.3s;
      font-size: 16px;
    }

    header nav a:hover {
      color: #e31337;
    }

    header form {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    header input[type="text"],
    header input[type="password"] {
      padding: 6px 12px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 6px;
      background: #fff;
      width: 300px;
    }

    header button {
      padding: 6px 12px;
      background: #e31337;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s;
      font-size: 14px;
      font-weight: 600;
    }

    header button:hover {
      background: #b10e2e;
    }

    .container {
      display: grid;
      grid-template-columns: 1fr 2fr 1fr;
      grid-gap: 40px;
      margin-top: 80px;
      padding: 20px;
    }

    .left-sidebar, .right-sidebar {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.08);
      padding: 25px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      transition: box-shadow 0.3s ease, transform 0.3s ease;
    }

    .left-sidebar:hover, .right-sidebar:hover {
      box-shadow: 0 6px 15px rgba(0,0,0,0.15);
      transform: translateY(-2px);
    }

    .left-sidebar {
  position: sticky;
  top: 80px;
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.08);
  padding: 25px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}


    .right-sidebar {
      position: sticky;
      top: 80px;
      height: fit-content;
    }

    .sidebar-link {
      display: block;
      color: #333;
      text-decoration: none;
      font-weight: 600;
      font-size: 15px;
      transition: color 0.3s;
    }

    .sidebar-link:hover {
      color: #e31337;
    }

    main {
      display: flex;
      flex-direction: column;
      gap: 20px;
      min-width: 0;
    }

    .articles__header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid #e0e0e0;
      padding-bottom: 10px;
      margin-bottom: 20px;
    }

    .articles__h1 {
      font-size: 22px;
      font-weight: bold;
      color: #333;
    }

    .articles__header select {
      padding: 6px 12px;
      border-radius: 6px;
      border: 1px solid #ccc;
      background: #fff;
      font-size: 14px;
    }

    #post-container {
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    .post {
      background: #fff;
      padding: 18px;
      border-radius: 10px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.08);
      transition: box-shadow 0.3s ease, transform 0.3s ease;
      text-decoration: none;
      color: inherit;
      display: flex;
      flex-direction: column;
      gap: 8px;
      word-break: break-word;
      overflow-wrap: anywhere;
    }

    .post:hover {
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      transform: translateY(-4px);
    }

    .post-header {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      color: #777;
      flex-wrap: wrap;
    }

    .post-header img {
      width: 35px;
      height: 35px;
      border-radius: 50%;
    }

    .user__col {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .user__name {
      font-size: 16px;
    }

    .timestamp__link {
      font-size: 14px;
      color: #777;
    }

    .post-title {
      font-size: 17px;
      font-weight: 700;
      color: #222;
      margin: 0;
    }

    .post-summary {
      font-size: 14px;
      color: #555;
      line-height: 1.4;
      margin: 0;
    }

    .ad-sidebar {
      background: #f0f0f0;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      box-shadow: 0 3px 8px rgba(0,0,0,0.08);
      font-size: 16px;
      transition: box-shadow 0.3s ease, transform 0.3s ease;
    }

    .ad-sidebar:hover {
      box-shadow: 0 6px 15px rgba(0,0,0,0.15);
      transform: translateY(-2px);
    }

    .ad-sidebar a {
      color: #e31337;
      font-weight: bold;
      text-decoration: none;
    }

    .ad-sidebar a:hover {
      text-decoration: underline;
    }

    #load-more-btn {
      margin: 20px auto 0;
      padding: 10px 20px;
      background: #e31337;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s;
    }

    #load-more-btn:hover {
      background: #b10e2e;
    }

    @media (max-width:768px) {
      .container {
        grid-template-columns: 1fr;
      }
      .left-sidebar, .right-sidebar {
        position: static;
        order: 2;
        margin-bottom: 20px;
      }
      main {
        order: 1;
      }
    }

    /* mobile: tap effect mirip hover */
    @media (hover: none) {
      .post:active, .left-sidebar:active, .right-sidebar:active, .ad-sidebar:active {
        box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        transform: translateY(-2px);
      }
    }
  </style>
</head>
<body>

<header>
  <div class="logo">Ga-zan Blockchain Hive</div>
  <form>
    <input type="text" placeholder="Username" name="username" required>
    <input type="password" placeholder="Posting Key" name="posting_key" required>
    <button type="submit">Login</button>
  </form>
</header>

<div class="container">
  <aside class="left-sidebar">
    <a href="#" class="sidebar-link">All posts</a>
    <a href="#" class="sidebar-link">Trending Communities</a>
    <a href="#" class="sidebar-link">Vibes</a>
    <a href="#" class="sidebar-link">Worldmappin</a>
    <a href="#" class="sidebar-link">Splinterlands</a>
    <a href="#" class="sidebar-link">LeoFinance</a>
    <a href="#" class="sidebar-link">Actifit</a>
    <a href="#" class="sidebar-link">Lifestyle</a>
    <a href="#" class="sidebar-link">Hive Gaming</a>
    <a href="#" class="sidebar-link">Explore communities...</a>
  </aside>

  <main>
    <div class="articles__header">
      <div class="articles__h1">All posts</div>
      <select id="sort-select">
        <option value="created">Newest</option>
        <option value="trending">Trending</option>
        <option value="hot">Hot</option>
      </select>
    </div>

    <div id="post-container"></div>
    <button id="load-more-btn">Load More Posts</button>
  </main>

  <aside class="right-sidebar">
    <div class="ad-sidebar">
      <p>Ingin jadi developer di Hive Blockchain? <a href="https://hive.io" target="_blank">Gabung sekarang!</a></p>
    </div>
  </aside>
</div>

<script>
let startAuthor = '';
let startPermlink = '';
let currentSort = 'created';

document.getElementById('sort-select').addEventListener('change', (e) => {
  currentSort = e.target.value;
  startAuthor = '';
  startPermlink = '';
  loadPosts(false);
});

function timeAgo(dateString) {
  const now = new Date();
  const date = new Date(dateString + 'Z');
  const seconds = Math.floor((now - date) / 1000);

  if (seconds < 5) return 'baru saja';
  if (seconds < 60) return `${seconds} detik yang lalu`;

  const minutes = Math.floor(seconds / 60);
  if (minutes < 60) return `${minutes} menit yang lalu`;

  const hours = Math.floor(minutes / 60);
  if (hours < 24) return `${hours} jam yang lalu`;

  const days = Math.floor(hours / 24);
  return `${days} hari yang lalu`;
}

async function loadPosts(loadMore = false) {
  const params = { tag: '', limit: 10 };
  if (loadMore && startAuthor && startPermlink) {
    params.start_author = startAuthor;
    params.start_permlink = startPermlink;
  }

  const response = await fetch('https://api.hive.blog', {
    method: 'POST',
    body: JSON.stringify({
      jsonrpc: '2.0',
      method: `condenser_api.get_discussions_by_${currentSort}`,
      params: [params],
      id: 1
    })
  });

  const data = await response.json();
  const posts = data.result;

  const container = document.getElementById('post-container');
  if (!loadMore) container.innerHTML = '';

  posts.forEach(post => {
    const cleanBody = post.body.replace(/(<([^>]+)>)/gi, "").replace(/\n/g, ' ').substring(0, 100);
    const postElement = document.createElement('a');
    postElement.className = 'post';
    postElement.href = `https://hive.blog${post.url}`;
    postElement.target = '_blank';
    postElement.innerHTML = `
      <div class="post-header">
        <div class="user__col">
          <img loading="lazy" src="https://images.hive.blog/u/${post.author}/avatar" alt="${post.author}">
          <span class="user__name">${post.author}</span>
        </div>
        <span class="timestamp__link">${timeAgo(post.created)}</span>
      </div>
      <div class="post-title">${post.title}</div>
      <p class="post-summary">${cleanBody}...</p>
    `;
    container.appendChild(postElement);
  });

  const lastPost = posts[posts.length - 1];
  startAuthor = lastPost.author;
  startPermlink = lastPost.permlink;
}

document.getElementById('load-more-btn').addEventListener('click', () => loadPosts(true));

// Load awal
loadPosts();
</script>

</body>
</html>
